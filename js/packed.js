(function($,undefined){$.ui=$.ui||{};if($.ui.version){return}$.extend($.ui,{version:"1.8.13",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}});$.fn.extend({_focus:$.fn.focus,focus:function(delay,fn){return typeof delay==="number"?this.each(function(){var elem=this;setTimeout(function(){$(elem).focus();if(fn){fn.call(elem)}},delay)}):this._focus.apply(this,arguments)},scrollParent:function(){var scrollParent;if(($.browser.msie&&(/(static|relative)/).test(this.css('position')))||(/absolute/).test(this.css('position'))){scrollParent=this.parents().filter(function(){return(/(relative|absolute|fixed)/).test($.curCSS(this,'position',1))&&(/(auto|scroll)/).test($.curCSS(this,'overflow',1)+$.curCSS(this,'overflow-y',1)+$.curCSS(this,'overflow-x',1))}).eq(0)}else{scrollParent=this.parents().filter(function(){return(/(auto|scroll)/).test($.curCSS(this,'overflow',1)+$.curCSS(this,'overflow-y',1)+$.curCSS(this,'overflow-x',1))}).eq(0)}return(/fixed/).test(this.css('position'))||!scrollParent.length?$(document):scrollParent},zIndex:function(zIndex){if(zIndex!==undefined){return this.css("zIndex",zIndex)}if(this.length){var elem=$(this[0]),position,value;while(elem.length&&elem[0]!==document){position=elem.css("position");if(position==="absolute"||position==="relative"||position==="fixed"){value=parseInt(elem.css("zIndex"),10);if(!isNaN(value)&&value!==0){return value}}elem=elem.parent()}}return 0},disableSelection:function(){return this.bind(($.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(event){event.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}});$.each(["Width","Height"],function(i,name){var side=name==="Width"?["Left","Right"]:["Top","Bottom"],type=name.toLowerCase(),orig={innerWidth:$.fn.innerWidth,innerHeight:$.fn.innerHeight,outerWidth:$.fn.outerWidth,outerHeight:$.fn.outerHeight};function reduce(elem,size,border,margin){$.each(side,function(){size-=parseFloat($.curCSS(elem,"padding"+this,true))||0;if(border){size-=parseFloat($.curCSS(elem,"border"+this+"Width",true))||0}if(margin){size-=parseFloat($.curCSS(elem,"margin"+this,true))||0}});return size}$.fn["inner"+name]=function(size){if(size===undefined){return orig["inner"+name].call(this)}return this.each(function(){$(this).css(type,reduce(this,size)+"px")})};$.fn["outer"+name]=function(size,margin){if(typeof size!=="number"){return orig["outer"+name].call(this,size)}return this.each(function(){$(this).css(type,reduce(this,size,true,margin)+"px")})}});function focusable(element,isTabIndexNotNaN){var nodeName=element.nodeName.toLowerCase();if("area"===nodeName){var map=element.parentNode,mapName=map.name,img;if(!element.href||!mapName||map.nodeName.toLowerCase()!=="map"){return false}img=$("img[usemap=#"+mapName+"]")[0];return!!img&&visible(img)}return(/input|select|textarea|button|object/.test(nodeName)?!element.disabled:"a"==nodeName?element.href||isTabIndexNotNaN:isTabIndexNotNaN)&&visible(element)}function visible(element){return!$(element).parents().andSelf().filter(function(){return $.curCSS(this,"visibility")==="hidden"||$.expr.filters.hidden(this)}).length}$.extend($.expr[":"],{data:function(elem,i,match){return!!$.data(elem,match[3])},focusable:function(element){return focusable(element,!isNaN($.attr(element,"tabindex")))},tabbable:function(element){var tabIndex=$.attr(element,"tabindex"),isTabIndexNaN=isNaN(tabIndex);return(isTabIndexNaN||tabIndex>=0)&&focusable(element,!isTabIndexNaN)}});$(function(){var body=document.body,div=body.appendChild(div=document.createElement("div"));$.extend(div.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0});$.support.minHeight=div.offsetHeight===100;$.support.selectstart="onselectstart"in div;body.removeChild(div).style.display="none"});$.extend($.ui,{plugin:{add:function(module,option,set){var proto=$.ui[module].prototype;for(var i in set){proto.plugins[i]=proto.plugins[i]||[];proto.plugins[i].push([option,set[i]])}},call:function(instance,name,args){var set=instance.plugins[name];if(!set||!instance.element[0].parentNode){return}for(var i=0;i<set.length;i++){if(instance.options[set[i][0]]){set[i][1].apply(instance.element,args)}}}},contains:function(a,b){return document.compareDocumentPosition?a.compareDocumentPosition(b)&16:a!==b&&a.contains(b)},hasScroll:function(el,a){if($(el).css("overflow")==="hidden"){return false}var scroll=(a&&a==="left")?"scrollLeft":"scrollTop",has=false;if(el[scroll]>0){return true}el[scroll]=1;has=(el[scroll]>0);el[scroll]=0;return has},isOverAxis:function(x,reference,size){return(x>reference)&&(x<(reference+size))},isOver:function(y,x,top,left,height,width){return $.ui.isOverAxis(y,top,height)&&$.ui.isOverAxis(x,left,width)}})})(jQuery);(function($,undefined){if($.cleanData){var _cleanData=$.cleanData;$.cleanData=function(elems){for(var i=0,elem;(elem=elems[i])!=null;i++){$(elem).triggerHandler("remove")}_cleanData(elems)}}else{var _remove=$.fn.remove;$.fn.remove=function(selector,keepData){return this.each(function(){if(!keepData){if(!selector||$.filter(selector,[this]).length){$("*",this).add([this]).each(function(){$(this).triggerHandler("remove")})}}return _remove.call($(this),selector,keepData)})}}$.widget=function(name,base,prototype){var namespace=name.split(".")[0],fullName;name=name.split(".")[1];fullName=namespace+"-"+name;if(!prototype){prototype=base;base=$.Widget}$.expr[":"][fullName]=function(elem){return!!$.data(elem,name)};$[namespace]=$[namespace]||{};$[namespace][name]=function(options,element){if(arguments.length){this._createWidget(options,element)}};var basePrototype=new base();basePrototype.options=$.extend(true,{},basePrototype.options);$[namespace][name].prototype=$.extend(true,basePrototype,{namespace:namespace,widgetName:name,widgetEventPrefix:$[namespace][name].prototype.widgetEventPrefix||name,widgetBaseClass:fullName},prototype);$.widget.bridge(name,$[namespace][name])};$.widget.bridge=function(name,object){$.fn[name]=function(options){var isMethodCall=typeof options==="string",args=Array.prototype.slice.call(arguments,1),returnValue=this;options=!isMethodCall&&args.length?$.extend.apply(null,[true,options].concat(args)):options;if(isMethodCall&&options.charAt(0)==="_"){return returnValue}if(isMethodCall){this.each(function(){var instance=$.data(this,name),methodValue=instance&&$.isFunction(instance[options])?instance[options].apply(instance,args):instance;if(methodValue!==instance&&methodValue!==undefined){returnValue=methodValue;return false}})}else{this.each(function(){var instance=$.data(this,name);if(instance){instance.option(options||{})._init()}else{$.data(this,name,new object(options,this))}})}return returnValue}};$.Widget=function(options,element){if(arguments.length){this._createWidget(options,element)}};$.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:false},_createWidget:function(options,element){$.data(element,this.widgetName,this);this.element=$(element);this.options=$.extend(true,{},this.options,this._getCreateOptions(),options);var self=this;this.element.bind("remove."+this.widgetName,function(){self.destroy()});this._create();this._trigger("create");this._init()},_getCreateOptions:function(){return $.metadata&&$.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName);this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled "+"ui-state-disabled")},widget:function(){return this.element},option:function(key,value){var options=key;if(arguments.length===0){return $.extend({},this.options)}if(typeof key==="string"){if(value===undefined){return this.options[key]}options={};options[key]=value}this._setOptions(options);return this},_setOptions:function(options){var self=this;$.each(options,function(key,value){self._setOption(key,value)});return this},_setOption:function(key,value){this.options[key]=value;if(key==="disabled"){this.widget()[value?"addClass":"removeClass"](this.widgetBaseClass+"-disabled"+" "+"ui-state-disabled").attr("aria-disabled",value)}return this},enable:function(){return this._setOption("disabled",false)},disable:function(){return this._setOption("disabled",true)},_trigger:function(type,event,data){var callback=this.options[type];event=$.Event(event);event.type=(type===this.widgetEventPrefix?type:this.widgetEventPrefix+type).toLowerCase();data=data||{};if(event.originalEvent){for(var i=$.event.props.length,prop;i;){prop=$.event.props[--i];event[prop]=event.originalEvent[prop]}}data=$.makeArray(data);this.element.trigger(event,data);data.splice(0,0,event);return!($.isFunction(callback)&&callback.apply(this.element[0],data)===false||event.isDefaultPrevented())}}})(jQuery);jQuery.fn.sortElements=(function(){var sort=[].sort;return function(comparator,getSortable){getSortable=getSortable||function(){return this};var placements=this.map(function(){var sortElement=getSortable.call(this),parentNode=sortElement.parentNode,nextSibling=parentNode.insertBefore(document.createTextNode(''),sortElement.nextSibling);return function(){if(parentNode===this){throw new Error("You can't sort elements if any one is a descendant of another.")}parentNode.insertBefore(this,nextSibling);parentNode.removeChild(nextSibling)}});return sort.call(this,comparator).each(function(i){placements[i].call(getSortable.call(this))})}})();(function($){$.toJSON=function(o){if(typeof(JSON)=='object'&&JSON.stringify)return JSON.stringify(o);var type=typeof(o);if(o===null)return"null";if(type=="undefined")return undefined;if(type=="number"||type=="boolean")return o+"";if(type=="string")return $.quoteString(o);if(type=='object'){if(typeof o.toJSON=="function")return $.toJSON(o.toJSON());if(o.constructor===Date){var month=o.getUTCMonth()+1;if(month<10)month='0'+month;var day=o.getUTCDate();if(day<10)day='0'+day;var year=o.getUTCFullYear();var hours=o.getUTCHours();if(hours<10)hours='0'+hours;var minutes=o.getUTCMinutes();if(minutes<10)minutes='0'+minutes;var seconds=o.getUTCSeconds();if(seconds<10)seconds='0'+seconds;var milli=o.getUTCMilliseconds();if(milli<100)milli='0'+milli;if(milli<10)milli='0'+milli;return'"'+year+'-'+month+'-'+day+'T'+hours+':'+minutes+':'+seconds+'.'+milli+'Z"'}if(o.constructor===Array){var ret=[];for(var i=0;i<o.length;i++)ret.push($.toJSON(o[i])||"null");return"["+ret.join(",")+"]"}var pairs=[];for(var k in o){var name;var type=typeof k;if(type=="number")name='"'+k+'"';else if(type=="string")name=$.quoteString(k);else continue;if(typeof o[k]=="function")continue;var val=$.toJSON(o[k]);pairs.push(name+":"+val)}return"{"+pairs.join(", ")+"}"}};$.evalJSON=function(src){if(typeof(JSON)=='object'&&JSON.parse)return JSON.parse(src);return eval("("+src+")")};$.secureEvalJSON=function(src){if(typeof(JSON)=='object'&&JSON.parse)return JSON.parse(src);var filtered=src;filtered=filtered.replace(/\\["\\\/bfnrtu]/g,'@');filtered=filtered.replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,']');filtered=filtered.replace(/(?:^|:|,)(?:\s*\[)+/g,'');if(/^[\],:{}\s]*$/.test(filtered))return eval("("+src+")");else throw new SyntaxError("Error parsing JSON, source is not valid.")};$.quoteString=function(string){if(string.match(_escapeable)){return'"'+string.replace(_escapeable,function(a){var c=_meta[a];if(typeof c==='string')return c;c=a.charCodeAt();return'\\u00'+Math.floor(c/16).toString(16)+(c%16).toString(16)})+'"'}return'"'+string+'"'};var _escapeable=/["\\\x00-\x1f\x7f-\x9f]/g;var _meta={'\b':'\\b','\t':'\\t','\n':'\\n','\f':'\\f','\r':'\\r','"':'\\"','\\':'\\\\'}})(jQuery);String.prototype.htmlencode=function(){var div=document.createElement("div");div.appendChild(document.createTextNode(this));return div.innerHTML.replace(/"/g,"&quot;")};RegExp.escape=function(str){var specials=new RegExp("[.*+?|()\\[\\]{}\\\\/]","g");return str.replace(specials,"\\$&")};String.prototype.parseQS=function(){var result={};var str=this.indexOf('?')==0?this.substring(1):this;var pairs=str.split('&');for(var i=0;i<pairs.length;i++){var pair=pairs[i].split('=');var key=unescape(pair[0]);var value=typeof pair[1]=="undefined"?null:unescape(pair[1]);if($.isUndefined(result[key])){result[key]=value}else if($.isArray(result[key])){result[key][result[key].length]=value}else{result[key]=[result[key],value]}}return result};function FormatBytes(bytes,forceBytes){var byteText=AddCommas(bytes+'')+' bytes';if(bytes>=1000*1024*1024){return AddCommas(Math.round(bytes*100/1024/ 1024/1024)/100)+' GB'+(forceBytes?' ('+byteText+')':'')}else if(bytes>=1000*1024){return AddCommas(Math.round(bytes*100/1024/ 1024) /100)+' MB'+(forceBytes?' ('+byteText+')':'')}else if(bytes>=1000){return AddCommas(Math.round(bytes*100/1024)/100)+' KB'+(forceBytes?' ('+byteText+')':'')}else{return byteText}}function AddCommas(nStr){nStr+='';x=nStr.split('.');x1=x[0];x2=x.length>1?'.'+x[1]:'';var rgx=/(\d+)(\d{3})/;while(rgx.test(x1)){x1=x1.replace(rgx,'$1'+','+'$2')}return x1+x2}function BinarySearch(haystack,needle,comparator){var low=0,high=haystack.length-1,comp=-1,mid=0;if(typeof comparator!='function'){comparator=function(needle,item,index){if(needle<item)return-1;if(needle>item)return 1;else return 0}}while(low<=high){var mid=Math.floor((low+high)/2);var comp=comparator(needle,haystack[mid],mid);if(comp<0){high=mid-1}else if(comp>0){low=mid+1}else{return mid}}if(comp<0)return-1-mid;if(comp>0)return-2-mid}jQuery.fn.extend({equals:function(elem){if(!elem||this.size()==0||($.isJQuery(elem)&&elem.size()==0))return false;if($.isJQuery(elem))elem=elem.get(0);return!(this.get(0)!==elem)},isParentOf:function(elem){return $(elem).isChildOf(this)},isChildOf:function(elem){if(!elem||this.size()==0||($.isJQuery(elem)&&elem.size()==0))return false;if($.isJQuery(elem))elem=elem.get(0);var comp=this.get(0);while(comp=comp.parentNode){if(!(elem!==comp))return true}return false},disableTextSelection:function(){return this.attr('unselectable','on').css('MozUserSelect','none').bind('selectstart.ui',function(){return false})},enableTextSelection:function(){return this.attr('unselectable','off').css('MozUserSelect','').unbind('selectstart.ui')}});jQuery.extend({getArrayKeys:function(arr){var keys=new Array();if($.isObject(arr)||$.isArray(arr)){for(var key in arr){keys.push(key)}}return keys},isJQuery:function(obj){return obj instanceof jQuery},isBoolean:function(obj){return typeof obj=='boolean'},isNull:function(obj){return obj===null},isNumber:function(obj){return typeof obj=='number'&&isFinite(obj)},isObject:function(obj){return(obj&&typeof obj=='object')||$.isFunction(obj)},isString:function(obj){return typeof obj=='string'},isUndefined:function(obj){return typeof obj=='undefined'},isDefined:function(obj){return typeof obj!='undefined'},isElement:function(object){return $.isObject(object)&&$.isDefined(object.nodeType)&&object.nodeType==1},isDocumentNode:function(object){if($.isJQuery(object)&&object.size()>0)object=object.get(0);return $.isObject(object)&&$.isDefined(object.nodeType)&&object.nodeType==9},explode:function(str,delim,limit){var arr=[];var index=-1;while((index=str.indexOf(delim))>=0&&(!limit||arr.length<limit-1)){arr[arr.length]=str.substring(0,index);if(str.substring(index)==delim)arr[arr.length]='';str=str.substring(index+1)}if(str.length>0)arr[arr.length]=str;return arr},implode:function(arr,delim,lastdelim){var str="";if($.isArray(arr)){if(arr.length==1)return arr[0]+'';for(var i=0;i<arr.length;i++){if(lastdelim&&i==arr.length-1){str+=(lastdelim+'')}else if(i>0){str+=(delim+'')}str+=(arr[i]+'')}}return str}});(function($){$.fn.scrollIntoView=function(target,duration){if(this.size==0)return;if($.isUndefined(duration))duration=0;if($.isJQuery(target)&&target.size()==0)return;else if(!$.isJQuery(target)&&!$.isElement(target))return;target=$(target);var container=this.eq(0),targetTop=Math.round(target.offset().top),targetLeft=Math.round(target.offset().left)+14,targetWidth=target.outerWidth()-14,targetHeight=target.outerHeight(),containerScrollTop=Math.round(container.scrollTop()),containerScrollLeft=Math.round(container.scrollLeft()),containerHeight=Math.round(container.height())-(container.get(0).clientWidth<container.get(0).scrollWidth?$.scrollBarSize().width:0)-4,containerWidth=Math.round(container.width())-(container.get(0).clientHeight<container.get(0).scrollHeight?$.scrollBarSize().width:0)-4;var scrollTop=Math.round(targetTop)+(containerScrollTop-Math.round(container.offset().top));var scrollLeft=Math.round(targetLeft)+(containerScrollLeft-Math.round(container.offset().left));if(scrollTop>=containerScrollTop&&(scrollTop+targetHeight)<=(containerScrollTop+containerHeight))scrollTop=null;if(scrollLeft>=containerScrollLeft&&(scrollLeft+targetWidth)<=(containerScrollLeft+containerWidth))scrollLeft=null;if(scrollTop!=null&&scrollTop>containerScrollTop&&containerHeight>targetHeight){scrollTop-=containerHeight-targetHeight}if(scrollLeft!=null&&scrollLeft>containerScrollLeft&&containerWidth>targetWidth){scrollLeft-=containerWidth-targetWidth}if(duration&&duration>0){}else{if(scrollTop!=null)container.scrollTop(scrollTop);if(scrollLeft!=null)container.scrollLeft(scrollLeft)}}})(jQuery);(function($){var _scrollBarSize=null;$.scrollBarSize=function(){if(_scrollBarSize==null){_scrollBarSize={};var outer=$('<div style="width: 100px; height: 100px; overflow: auto; position: absolute; left: -1000px; top: -1000px;"><div></div></div>').appendTo('body'),inner=outer.children().first();inner.css('height','200px');_scrollBarSize.vert=outer.width()-inner.width();inner.css({height:'100%',width:'200px'});var ih=inner.height(),oh=outer.height();var clientWidthVerified=$.isDefined(outer.prop('clientWidth'))&&100-outer.prop('clientWidth')==_scrollBarSize.vert;_scrollBarSize.horiz=(ih==0||ih>=oh)?clientWidthVerified?100-outer.prop('clientHeight'):_scrollBarSize.vert:oh-ih;outer.remove()}return _scrollBarSize}})(jQuery);(function($){$.widget("ui.scrollerResize",{options:{contents:'>*:first',scroller:null},_create:function(){var self=this,$elem=$(this.element).addClass(this.widgetBaseClass);this._scroller=this.options.scroller?$(this.options.scroller):$elem;this._contents=this._scroller.find(this.options.contents);this._parent=null},resize:function(center){var self=this,$elem=$(this.element),scrollBar=$.scrollBarSize();if(!this._parent){this._parent=$elem.offsetParent();if(this._parent.is('body')){this._parent=$(window);this._parentFn={width:'width',height:'height'}}else{this._parentFn={width:'outerWidth',height:'outerHeight'}}}this._scroller.css('white-space','nowrap');var diff={width:$elem.outerWidth(true)-this._scroller.width(),height:$elem.outerHeight(true)-this._scroller.height()},max={width:this._parent[this._parentFn.width]()-diff.width,height:this._parent[this._parentFn.height]()-diff.height},contents={width:this._contents.outerWidth(true)},size={width:Math.min(max.width,contents.width)};this._scroller.width(size.width);contents={width:this._contents.outerWidth(true),height:this._contents.outerHeight(true)},size.height=Math.min(max.height,contents.height);if(size.height<contents.height){size.width=Math.min(max.width,size.width+scrollBar.vert)}if(size.width<contents.width){size.height=Math.min(max.height,size.height+scrollBar.horiz)}if(center){$elem.css({left:(max.width-size.width)/2,top:(max.height-size.height)/2})}this._scroller.css(size)}})})(jQuery);(function($){$.widget("ui.dialog",{options:{opening:null,opened:null,closed:null,title:null,roundedBorders:true,shadow:true,closeButton:true,dimmer:true,borderColor:null,backgroundColor:null,titleColor:null,textColor:null,borderSize:10},_create:function(){var self=this,$elem=$(this.element).addClass(this.widgetBaseClass).hide();this._parent=$elem.parent();this._contents=$elem.wrapInner('<div class="'+this.widgetBaseClass+'-contents">').children().first();this._scroller=this._contents.wrap('<div class="'+this.widgetBaseClass+'-scroller">').parent();$elem.scrollerResize({scroller:this._scroller});$('<div style="clear: both;"></div>').appendTo(this._scroller);this._title=$('<div class="'+this.widgetBaseClass+'-title'+'"></div>').insertBefore(this._scroller);this._close=$('<div class="'+this.widgetBaseClass+'-close'+'"></div>').click(function(){self.close()}).appendTo($elem);this._dimmer=$('#'+this.widgetBaseClass+'-dimmer');if(this._dimmer.size()==0)this._dimmer=$('<div>').attr('id',this.widgetBaseClass+'-dimmer').appendTo('body');$('#'+this.widgetBaseClass+'-dimmer').live('click',function(){if(self.options.dimmer)self.close()});for(var key in this.options){this._processOption(key,this.options[key])}},option:function(key,value){var $elem=$(this.element);if(key=="parent")value=$(value);if(this._processOption(key,value))$.Widget.prototype.option.call(this,key,value)},_processOption:function(key,value){var $elem=$(this.element);switch(key){case'parent':if(!value.isParentOf($elem))return false;break;case'title':if($.isString(value)&&value.length>0)this._title.text(value).show();else this._title.text('').hide();this.resize();break;case'roundedBorders':$elem[value?'addClass':'removeClass'](this.widgetBaseClass+'-has-rounded-borders');break;case'shadow':$elem[value?'addClass':'removeClass'](this.widgetBaseClass+'-has-shadow');break;case'closeButton':this._close[value?'show':'hide']();break;case'borderSize':if(!$.isNumber(value))return false;$elem.css('border-width',value);this._close.css({top:(-10-value)+'px',right:(-10-value)+'px'});this.resize();break;case'borderColor':if(!$.isString(value))return false;$elem.css('border-color',value);this._title.css('background-color',value);break;case'backgroundColor':if(!$.isString(value))return false;$elem.css('background-color',value);break;case'titleColor':if(!$.isString(value))return false;this._title.css('color',value);break;case'textColor':if(!$.isString(value))return false;this._contents.css('color',value);break}return true},open:function(){var self=this,$elem=$(this.element);this._trigger('opening',null,[this._contents]);$elem.css({left:'-100000px',top:'-100000px'}).show();this.resize();if(this.options.dimmer)this._dimmer.show();this._trigger('opened')},close:function(){$(this.element).hide();if(this.options.dimmer)this._dimmer.hide();this._trigger('closed')},resize:function(){var $elem=$(this.element);if(!$elem.is(':visible'))return;$elem.scrollerResize('resize',true);var scrollerWidth=this._scroller.outerWidth(true),scrollerDiff=scrollerWidth-this._scroller.width(),min=$elem.width();if(scrollerWidth<min){this._scroller.width(min)}},contents:function(contents){if(contents){this._contents.html(contents);this.resize()}else{return this._contents}}})})(jQuery);(function($){$.widget("ui.tree",{options:{expandRoot:true,data:null,root:null,expandOnSelect:true,closeOthersOnSelect:true,comparator:function(a,b){if(a.name.toLowerCase()<b.name.toLowerCase())return-1;if(a.name.toLowerCase()>b.name.toLowerCase())return 1;return 0},getPrefix:null},select:function(hash,li){var self=this,parents=[];if($.isArray(hash)){parents=hash;hash=parents.pop()}if(!this._data[hash]){this.deselect();return}if(hash!=this._lastHash){this._lastHash=hash;for(var i=0;i<parents.length;i++){this.open(parents[i])}if(!li)li=$('#'+this.widgetBaseClass+'_'+hash);$('li.selected',this.element).removeClass('selected');li.addClass('selected');if(this.options.closeOthersOnSelect){$('li.'+this.widgetBaseClass+'-open').each(function(){if(!$(this).equals(li)&&!li.isParentOf($(this))&&!li.isChildOf($(this))){self.close(null,$(this))}})}if(this.options.expandOnSelect)this.open(hash,li);$('#LeftColumnScroller').scrollIntoView(li)}},deselect:function(){$('li.selected',this.element).removeClass('selected');this._lastHash=null},open:function(hash,li){if(!li)li=$('#'+this.widgetBaseClass+'_'+hash);else li=$(li);if(!li.hasClass(this.widgetBaseClass+'-open')&&!li.hasClass(this.widgetBaseClass+'-nosubdirs')){if($('> ul',li).size()!=0){li.addClass(this.widgetBaseClass+'-open');this.resort($('> ul',li));$('> ul',li).show()}else{li.addClass(this.widgetBaseClass+'-open');li.append(this._createUL(hash))}}},close:function(hash,li){if(!li)li=$('#'+this.widgetBaseClass+'_'+hash);if(!li.hasClass(this.widgetBaseClass+'-root')){li.removeClass(this.widgetBaseClass+'-open');$('> ul',li).hide()}},toggle:function(hash,li){if(!li)li=$('#'+this.widgetBaseClass+'_'+hash);if(li.hasClass(this.widgetBaseClass+'-open')){this.close(hash,li)}else{this.open(hash,li)}},_create:function(){var self=this,$elem=$(this.element).disableTextSelection().addClass(this.widgetBaseClass);if(this.options.data==null||this.options.root==null){throw"data and root must be specified in the options for ui.tree."}this._lastHash=null;this._data=this.options.data;this._filesData=[];if($.isUndefined(this._data[this.options.root])){throw"root was not found in the provided directory data."}$elem.click(function(eo){var id,li,target=$(eo.target),files=false;if(target.closest('div.'+self.widgetBaseClass+'-expander',self.element).size()>0){li=target.closest('li',self.element);id=li.attr('id')}if(li&&$.isString(id)&&id.indexOf(self.widgetBaseClass+'_')==0){var hash=id.substring((self.widgetBaseClass+'_').length);if(hash.indexOf('files_')==0){hash=hash.substring('files_'.length);files=true;li=null}if(target.hasClass(self.widgetBaseClass+'-expander')){self.toggle(hash,li)}else{self.select(hash,li);self._trigger('selection',{},[hash,files])}}});$elem.append('<ul class="'+this.widgetBaseClass+'-rootul">'+this._createLI(this.options.root,this._data[this.options.root].name,this.widgetBaseClass+'-root '+this.widgetBaseClass+'-open')+'</ul>');$('#'+this.widgetBaseClass+'_'+this.options.root).append(this._createUL(this.options.root))},_createUL:function(parenthash){if(!this._data[parenthash])return'';var sorted=[],self=this,parentdata=this._data[parenthash],subdirs=parentdata.subdirs,subbytes=0,subnum=0;for(var i=0;i<subdirs.length;i++){var hash=$.isString(subdirs[i])?subdirs[i]:subdirs[i].hash;var data=this._data[hash];var html=this._createLI(hash,data.name,data.subdirs.length>0?'':this.widgetBaseClass+'-nosubdirs',this.options.getPrefix?this.options.getPrefix(data,parentdata):'');subbytes+=parseInt(data.totalbytes);subnum+=parseInt(data.totalnum);var index=BinarySearch(sorted,data,function(needle,item,index){return self.options.comparator(needle,item[0])});if(index<0){sorted.splice(Math.abs(index)-1,0,[data,html])}else{sorted.splice(index,0,[data,html])}}this._filesData[parenthash]={files:true,name:'',totalbytes:parseInt(parentdata.totalbytes)-subbytes,totalnum:parseInt(parentdata.totalnum)-subnum};var html=this._createLI(parenthash,'Files in this directory',this.widgetBaseClass+'-files '+this.widgetBaseClass+'-nosubdirs',this.options.getPrefix?this.options.getPrefix(this._filesData[parenthash],parentdata):'',true);var index=BinarySearch(sorted,this._filesData[parenthash],function(needle,item,index){return self.options.comparator(needle,item[0])});if(index<0){sorted.splice(Math.abs(index)-1,0,[null,html])}else{sorted.splice(index,0,[null,html])}if(sorted.length){var classIndex=sorted[sorted.length-1][1].indexOf(' class="');sorted[sorted.length-1][1]=sorted[sorted.length-1][1].substring(0,classIndex+' class="'.length)+this.widgetBaseClass+'-last '+sorted[sorted.length-1][1].substring(classIndex+' class="'.length);if(sorted[sorted.length-1][0]==null&&sorted.length>1){classIndex=sorted[sorted.length-1][1].indexOf(' class="');sorted[sorted.length-2][1]=sorted[sorted.length-2][1].substring(0,classIndex+' class="'.length)+this.widgetBaseClass+'-lastdir '+sorted[sorted.length-2][1].substring(classIndex+' class="'.length)}}var finalHTML='';for(var i=0;i<sorted.length;i++){finalHTML+=sorted[i][1]}return'<ul>'+finalHTML+'</ul>'},_createLI:function(hash,name,classes,prefix,isfiles){return'<li '+($.isString(classes)?' class="'+classes+'" ':'')+' id="'+this.widgetBaseClass+'_'+(isfiles?'files_':'')+hash.htmlencode()+'"><div class="'+this.widgetBaseClass+'-linecover"><div class="'+this.widgetBaseClass+'-expander"><div class="'+this.widgetBaseClass+'-icon"><span class="'+this.widgetBaseClass+'-prefix">'+($.isString(prefix)&&prefix!=''?prefix.htmlencode()+' ':'')+'</span><span class="'+this.widgetBaseClass+'-label">'+name.htmlencode()+'</span></div></div></div></li>'},resort:function(startUL){var self=this,ul,subUL,stack=[startUL?startUL:$('>ul>li>ul',this.element).get(0)];while($.isDefined(ul=stack.pop())){var parentLi=$(ul).closest('li[id]',this.element),parenthash=parentLi.size()?parentLi.attr('id').substr((this.widgetBaseClass+'_').length):'',sorted=[],li=$('>li',ul);li.removeClass(this.widgetBaseClass+'-last '+this.widgetBaseClass+'-lastdir');li.each(function(){var $this=$(this),hash=$this.attr('id').substr((self.widgetBaseClass+'_').length),data=self._data[hash];if($this.hasClass(self.widgetBaseClass+'-files')){hash=hash.substr('files_'.length);data=self._filesData[hash]}if(self.options.getPrefix&&parentLi.size()){var prefix=self.options.getPrefix(data,self._data[parenthash]);$('span.'+self.widgetBaseClass+'-prefix',$this).text($.isString(prefix)?prefix+' ':'')}if($this.hasClass(self.widgetBaseClass+'-open')&&(subUL=$('>ul',$this))){stack.push(subUL)}var index=BinarySearch(sorted,data,function(needle,item,index){return self.options.comparator(needle,item[0])});if(index<0){sorted.splice(Math.abs(index)-1,0,[data,this])}else{sorted.splice(index,0,[data,this])}});if(sorted.length){var last=$(sorted[sorted.length-1][1]).addClass(this.widgetBaseClass+'-last');if(sorted.length>1&&last.hasClass(this.widgetBaseClass+'-files')){$(sorted[sorted.length-2][1]).addClass(this.widgetBaseClass+'-lastdir')}}$(ul).append($($.map(sorted,function(item){return item[1]})))}}})})(jQuery);(function($){var History=window.History=function(){this.init()};History.prototype={token:'',handlers:[],mode:'onhashchange',getToken:function(){return this.token},setToken:function(token){this.token=token},addHandler:function(fn){this.handlers.push(fn)},fireHistoryChangedImpl:function(newToken){for(var key in this.handlers){this.handlers[key](newToken)}},init:function(){var token='',self=this;var hash=window.location.hash;if(hash.length>0){token=this.decodeFragment(hash.substring(1))}this.setToken(token);var oldHandler=window.onhashchange;window.onhashchange=function(){var token='',hash=window.location.hash;if(hash.length>0){token=self.decodeFragment(hash.substring(1))}self.newItemOnEvent(token);if(oldHandler){oldHandler()}};return true},newItem:function(historyToken,issueEvent){historyToken=(historyToken==null)?"":historyToken;if(historyToken!=this.getToken()){this.setToken(historyToken);this.nativeUpdate(historyToken);if(issueEvent){this.fireHistoryChangedImpl(historyToken)}}},newItemOnEvent:function(historyToken){historyToken=(historyToken==null)?"":historyToken;if(historyToken!=this.getToken()){this.setToken(historyToken);this.nativeUpdateOnEvent(historyToken);this.fireHistoryChangedImpl(historyToken)}},decodeFragment:function(encodedFragment){return decodeURI(encodedFragment.replace("%23","#"))},encodeFragment:function(fragment){return encodeURI(fragment).replace("#","%23")},nativeUpdate:function(historyToken){window.location.hash=this.encodeFragment(historyToken)},nativeUpdateOnEvent:function(historyToken){}};var Timer={mode:'timer',init:function(){var token='';var hash=window.location.hash;if(hash.length>0){token=this.decodeFragment(hash.substring(1))}this.setToken(token);var self=this;var checkHistory=function(){var token='',hash=window.location.hash;if(hash.length>0){token=self.decodeFragment(hash.substring(1))}self.newItemOnEvent(token)};var checkHistoryCycle=function(){window.setTimeout(checkHistoryCycle,250);checkHistory()};checkHistoryCycle();return true}};if('pushStateDISABLED'in window.history){$.extend(History.prototype,{mode:'html5',init:function(){var token='',self=this;var hash=window.location.hash;if(hash.length>0){token=this.decodeFragment(hash.substring(1))}this.setToken(token);var oldHandler=window.popstate;$(window).bind('popstate',function(){var token='',hash=window.location.hash;if(hash.length>0){token=self.decodeFragment(hash.substring(1))}self.newItemOnEvent(token);if(oldHandler){oldHandler.apply(this,arguments)}});return true},nativeUpdate:function(token){window.history.pushState(null,null,window.location.pathname+window.location.search+'#'+this.encodeFragment(token))}})}else if($.browser.opera){$.extend(History.prototype,Timer,{mode:'opera'})}else if($.browser.safari||$.browser.webkit){$.extend(History.prototype,Timer,{mode:'safari',nativeUpdate:function(historyToken){window.location=window.location.href.split('#')[0]+'#'+this.encodeFragment(historyToken)}})}else if($.browser.msie&&$.browser.version.match(/^[67]\./)!=null){$.extend(History.prototype,{mode:'ie',escapeHtml:function(maybeHtml){return $('<div>').text(maybeHtml).html()},findHistoryFrame:function(){return $('#__gwt_historyFrame').get(0)},getLocationHash:function(){var href=window.location.href,hashLoc=href.lastIndexOf("#");return(hashLoc>0)?href.substring(hashLoc):""},getTokenElement:function(historyFrame){if(historyFrame.contentWindow){var doc=historyFrame.contentWindow.document;return doc.getElementById('__gwt_historyToken')}},historyFrame:null,reloadedWindow:false,init:function(){this.historyFrame=this.findHistoryFrame();if(!this.historyFrame){return false}this.initHistoryToken();var tokenElement=this.getTokenElement(this.historyFrame);if(tokenElement!=null){this.setToken(this.getTokenElementContent(tokenElement))}else{this.navigateFrame(this.getToken())}this.injectGlobalHandler();this.initUrlCheckTimer();return true},nativeUpdate:function(historyToken){this.updateHash(historyToken);this.navigateFrame(historyToken)},nativeUpdateOnEvent:function(historyToken){this.updateHash(historyToken)},getTokenElementContent:function(tokenElement){return tokenElement.innerText},handleWindowReloadCanceled:function(){if(this.reloadedWindow){this.reloadedWindow=false;this.updateHash(this.getToken());return true}return false},initHistoryToken:function(){var token='';var hash=this.getLocationHash();if(hash.length>0){try{token=this.decodeFragment(hash.substring(1))}catch(e){window.location.hash=''}}this.setToken(token)},initUrlCheckTimer:function(){var self=this;var urlChecker=function(){window.setTimeout(urlChecker,250);if(self.handleWindowReloadCanceled()){return}var hash=self.getLocationHash();if(hash.length>0){var token='';try{token=self.decodeFragment(hash.substring(1))}catch(e){self.reloadWindow()}var historyToken=self.getToken();if(historyToken&&(token!=historyToken)){self.reloadWindow()}}};urlChecker()},injectGlobalHandler:function(){var self=this;var oldOnLoad=window.__gwt_onHistoryLoad;window.__gwt_onHistoryLoad=function(token){self.newItemOnEvent(token);if(oldOnLoad){oldOnLoad(token)}}},navigateFrame:function(token){var escaped=this.escapeHtml(token);var doc=this.historyFrame.contentWindow.document;doc.open();doc.write('<html><body onload="if(parent.__gwt_onHistoryLoad)parent.__gwt_onHistoryLoad(__gwt_historyToken.innerText)"><div id="__gwt_historyToken">'+escaped+'</div></body></html>');doc.close()},reloadWindow:function(){reloadedWindow=true;window.location.reload()},updateHash:function(token){window.location.hash=this.encodeFragment(token)}})}else if($.browser.mozilla&&$.browser.version.indexOf('1.8')==0){$.extend(History.prototype,Timer,{mode:'mozilla',decodeFragment:function(encodedFragment){return encodedFragment},nativeUpdate:function(historyToken){if(historyToken.length==0){var s=window.location.href;var i=s.indexOf('#');if(i!=-1)s=s.substring(0,i);window.location=s+'#'}else{window.location.hash=this.encodeFragment(historyToken)}}})}else if(!('onhashchange'in window)){$.extend(History.prototype,Timer)}})(jQuery);$.fn.log=function(o,sub){var compactListCSS={'list-style':'none','margin':'0','padding':'0','display':'inline'},expandedListCSS={'list-style':'','margin':'','padding':'','display':''},charLimit=200,container=$(this).eq(0),passedFirst=false,passedLimit=false,ul,more,populate;var toggleList=function(){if(populate){ul.empty();populate()}else if(ul.css('display')=='inline'){ul.css(expandedListCSS).find('>li').css(expandedListCSS).end().find('>span').hide().end();if(more)more.hide()}else{ul.css(compactListCSS).find('>li').css(compactListCSS).end().find('>span').css('display','inline').end().find('>.hide-on-collapse').hide().end();if(more)more.show()}};switch($.type(o)){case'string':$('<span>').css({'color':'#F00'}).text('"'+o+'"').appendTo(container);break;case'array':$('<span>').text('Array [ ').css('cursor','pointer').click(toggleList).appendTo(container);ul=$('<ul>').css(compactListCSS).appendTo(container);populate=function(){for(var i=0;i<o.length;i++){if(passedFirst)$('<span>').text(', ').appendTo(ul);var li=$('<li>').css(compactListCSS).appendTo(ul);$('<span>').css({'color':'#060'}).text(i+': ').appendTo(li);li.log(o[i],true);passedFirst=true}for(var key in o){if(isNaN(key)){if(passedFirst)$('<span>').text(', ').appendTo(ul);var li=$('<li>').css(compactListCSS).appendTo(ul);$('<span>').css({'color':'#060'}).text(key+': ').appendTo(li);li.log(o[i],true);passedFirst=true}}populate=null};if(sub){$('<li>').text('...').css(compactListCSS).css({cursor:'pointer',color:'#00F'}).appendTo(ul).click(function(){ul.empty();populate();toggleList()})}else{populate()}container.append(document.createTextNode(' ]'));break;case'object':$('<span>').css({'color':'#060'}).text('Object { ').css('cursor','pointer').click(toggleList).appendTo(container);ul=$('<ul>').css(compactListCSS).appendTo(container);populate=function(){for(var key in o){if(passedFirst)$('<span>').text(', ').addClass(passedLimit?'hide-on-collapse':'').css('display',passedLimit?'none':'show').appendTo(ul);var li=$('<li>').addClass(passedLimit?'hide-on-collapse':'').css(compactListCSS)[passedLimit?'hide':'show']().appendTo(ul);$('<span>').css({'color':'#060'}).text(key+': ').appendTo(li);try{li.log(o[key],true)}catch(e){$('<span>').css({'color':'#F00','text-decoration':'blink'}).text('Exception ').appendTo(li);li.log(e)}passedFirst=true;passedLimit=passedLimit?passedLimit:ul.text().length>charLimit}if(passedLimit){more=$('<span>').text(', ...').css({cursor:'pointer',color:'#00F'}).click(function(){toggleList()}).appendTo(ul)}populate=null};if(sub){$('<li>').text('...').css(compactListCSS).css({cursor:'pointer',color:'#00F'}).appendTo(ul).click(toggleList)}else{populate()}$('<span>').css({'color':'#060'}).text(' }').appendTo(container);break;case'function':$('<span>').text('function()').appendTo(container);break;case'undefined':$('<span>').css({'color':'#666','font-style':'italic'}).text('undefined').appendTo(container);break;case'boolean':$('<span>').css({'color':'#06F'}).text(o?'true':'false').appendTo(container);break;case'number':$('<span>').css({'color':'#06F'}).text(o+'').appendTo(container);break;case'date':case'regexp':default:container.append(document.createTextNode($.type(o)));break}return this};window.consolex={hasInit:false,init:function(){if(!window.consolex.hasInit){window.consolex.hasInit=true;var container=window.consolex.container=$('<div>').css({'z-index':'999999999',position:'absolute',top:'6px',right:'6px','background-color':'#EEE',height:'200px',width:'75%',border:'1px solid #666'}).appendTo('body');var inner=$('<div>').css({margin:'6px'}).appendTo(container);var scroller=$('<div>').css({overflow:'auto',height:'188px',width:'100%'}).appendTo(inner);var toggle=$('<div>').text('Toggle').css({position:'absolute',right:'4px',top:'4px',cursor:'pointer','background-color':'#FFF',padding:'3px',border:'1px solid #666'}).click(function(){if(inner.is(':visible')){container.css({width:'57px',height:'32px'});inner.hide()}else{container.css({width:'75%',height:'200px'});inner.show()}}).appendTo(container);window.consolex.ul=$('<ul>').appendTo(scroller)}},log:function(a){window.consolex.init();$('<li>').log(a).appendTo(window.consolex.ul);window.consolex.container.scrollTop(99999)}};if(!('console'in window)){window.console=window.consolex}var Controller;(function($){Controller=function(){var self=this;this.addLanguage([['en-us','English (US)']]);$('#Container').show();this._lastHash=null;this._lastSection=null;this._lastSectionOptions=null;this._lastTreeOptions=null;this._sections=$('#Sections');this._filesSection=$('#Section_Files');this._typesSection=$('#Section_Types');this._sizesSection=$('#Section_Sizes');this._modifiedSection=$('#Section_Modified');this._subdirsSection=$('#Section_SubDirs');this._top100Section=$('#Section_Top100');this.gradient=['007eff','0081f8','0084ef','0088e4','008dd8','0092cb','0097bd','009cae','00a29f','00a88f','00ae80','00b275','00b66a','00ba60','00be56','00c24c','00c642','00ca38','00cd2f','00d127','00d41f','00d717','00da10','03dd0a','07e005','0be200','15e600','22eb00','31ef00','42f300','55f600','69fa00','7dfd00','8bfe00','93ff00','9cff00','a5ff00','adff00','b5ff00','bdff00','c5ff00','cdff00','d4ff00','dbff00','e2ff00','e8ff00','eeff00','f3ff00','f8ff00','fcff00','ffff00','fffd00','fffa00','fff800','fff500','fff200','ffee00','ffea00','ffe600','ffe200','ffde00','ffd900','ffd400','ffcf00','ffca00','ffc500','ffc000','ffba00','ffb500','ffb000','ffaa00','ffa500','ffa000','ff9a00','ff9500','ff9000','ff8d00','ff8900','ff8600','ff8200','ff7f00','ff7b00','ff7700','ff7300','ff6f00','ff6b00','ff6700','ff6300','ff5f00','ff5a00','ff5600','ff5200','ff4e00','ff4900','ff4500','ff4100','ff3100','ff2200','ff1400','ff0900'];this.report=window.location.search.substring(1);this.pageMax=100;$.scrollBarSize();var resizeTimeout,resizeCounter=0,resizeFn=function(){resizeCounter=0;self.resizeWindow()};$(window).resize(function(){if(resizeCounter>=500){resizeFn()}else{if(resizeTimeout)clearTimeout(resizeTimeout);resizeTimeout=setTimeout(resizeFn,resizeCounter+=150)}});$('.pager a[href], #Sections a[href]').live('click',function(ev){self.setOptions(self._parseLocation($(this).attr('href')));ev.preventDefault()});for(var i in this.inits)this.inits[i].call(this);this.resizeWindow();$.history=new History()};$.extend(Controller.prototype,{inits:[],_ajaxStage:null,_debugTimeoutFn:function(fn,timeout){fn();return null},_debugTimeout:500,_preLoad:true,directories:null,reportsBaseURL:'data/',options:null,defaultOptions:{hash:null,section:'subdirs',totalsSortBy:'byte',totalsSortRev:true,filesSortBy:'size',filesSortRev:true,top100SortBy:'size',top100SortRev:true,treeSortBy:'label',treeSortRev:false,page:1},load:function(){var self=this;this._preLoad=false;this.addLanguage(this.defaultLanguage);this.setLanguage(!this.language?this.defaultLanguage:this.language,function(ret,message){if(ret){$('#Loading').html(self.translate('loading_settings'));self._debugTimeoutFn(function(){self._downloadSettings()},self._debugTimeout)}else{$('#Loading').text('Language file could not be loaded: '+message)}})},setLocation:function(location,completeFn){this.options=$.extend({},this.defaultOptions,this._parseLocation(location));if(!this.options.hash){this.options.hash=this.settings.root}this.displayReport(completeFn)},setOptions:function(options,skipHistory){$.extend(this.options,options);if(!skipHistory){$.history.newItem(this._createLocation(this.options))}this.displayReport()},displayReport:function(completeFn){var self=this;if(this._lastHash!=this.options.hash){this._debugTimeoutFn(function(){self._downloadHash(completeFn)},this._debugTimeout)}else{this._populateReport();if($.isFunction(completeFn))completeFn()}},_downloadHash:function(completeFn){var self=this;if(this._xhr)this._xhr.abort();this._xhr=$.ajax({cache:false,url:this.reportsBaseURL+this.report+'/'+this.options.hash,type:'GET',dataType:'json',error:function(xhr,status,ex){self._data=null;switch(status){case'parsererror':$('#Error').html(self.translate('hash_parse_error'));break;case'timeout':$('#Error').html(self.translate('hash_timeout_error'));break;case'error':switch(xhr.status){case 404:$('#Error').html(self.translate('hash_notfound_error'));break;case 401:$('#Error').html(self.translate('hash_username_error'));break;default:$('#Error').html(self.translate('hash_unknown_error',xhr.status))}break;default:$('#Error').html(self.translate('hash_unknown_error',status))}if(self.directories){self._tree.tree('select',self.options.hash)}},success:function(data,status,xhr){self._data=data;if(self.directories){var hashPath=[];for(var i=0;i<data.parents.length;i++){hashPath.push(data.parents[i].hash)}hashPath.push(self.options.hash);self._tree.tree('select',hashPath)}},complete:function(){if(self._lastHash!=null)self.options.page=1;self._lastHash=self.options.hash;self._lastSection=self._lastSectionOptions=null;$('#Error')[self._data?'hide':'show']();$('#RightColumn')[self._data?'show':'hide']();self._populateReport();self.resizeWindow();if($.isFunction(completeFn))completeFn()}})},_parseLocation:function(location){if($.isString(location)){if(location.indexOf('http://')==0&&location.indexOf('#')>=0)location=location.substring(location.indexOf('#'));if(location.indexOf('#')==0)location=location.substring(1);location=location.parseQS()}var opts={};if(location.h&&location.h.match(/^[a-f0-9]{32}$/i)){opts.hash=location.h.toLowerCase()}if(location.s&&location.s.match(/^(subdirs|files|modified|types|sizes|top100)$/i)){opts.section=location.s.toLowerCase()}if(location.tsb&&location.tsb.match(/^(label|byte|num)$/)){opts.totalsSortBy=location.tsb}if(location.tsr&&location.tsr.match(/^[01]$/)){opts.totalsSortRev=location.tsr=='1'}if(location.fsb&&location.fsb.match(/^(name|type|size|modified)$/)){opts.filesSortBy=location.fsb}if(location.fsr&&location.fsr.match(/^[01]$/)){opts.filesSortRev=location.fsr=='1'}if(location.bsb&&location.bsb.match(/^(name|type|size|modified|path)$/)){opts.top100SortBy=location.bsb}if(location.bsr&&location.bsr.match(/^[01]$/)){opts.top100SortRev=location.bsr=='1'}if(location.dsb&&location.dsb.match(/^(name|byte|num)$/)){opts.treeSortBy=location.dsb}if(location.dsr&&location.dsr.match(/^[01]$/)){opts.treeSortRev=location.dsr=='1'}if(location.p&&location.p.match(/^[0-9]+$/)){opts.page=parseInt(location.p)}return opts},_createLocation:function(options,type){var opts=$.extend({},this.options,options),hash=section=totalsSort=filesSort=top100Sort=treeSort=page=true;switch(type){case'path':case'contents':case'top100':page=false;case'pager':treeSort=false;break}return((hash?'&h='+escape(opts.hash):'')+(section?'&s='+escape(opts.section):'')+(totalsSort?'&tsb='+escape(opts.totalsSortBy):'')+(totalsSort?'&tsr='+escape(opts.totalsSortRev?'1':'0'):'')+(filesSort?'&fsb='+escape(opts.filesSortBy):'')+(filesSort?'&fsr='+escape(opts.filesSortRev?'1':'0'):'')+(top100Sort?'&bsb='+escape(opts.top100SortBy):'')+(top100Sort?'&bsr='+escape(opts.top100SortRev?'1':'0'):'')+(treeSort?'&dsb='+escape(opts.treeSortBy):'')+(treeSort?'&dsr='+escape(opts.treeSortRev?'1':'0'):'')+(page?'&p='+escape(opts.page):'')).substring(1)},resizeWindow:function(){var footerHeight=$('#Footer').outerHeight();var containerHeightDiff=$('#Container').outerHeight(true)-$('#Container').height();$('#Container').height($('body').height()-containerHeightDiff-$('#Container').offset().top-footerHeight-5);$('#ErrorsDialog, #LanguageDialog').dialog('resize');if($('#LeftColumn').is(':visible')){var leftColumnBorderHeightDiff=$('#LeftColumnBorder').outerHeight(true)-$('#LeftColumnBorder').height();$('#LeftColumnBorder').height($('#LeftColumn').height()-leftColumnBorderHeightDiff);var leftColumnScrollerHeightDiff=$('#LeftColumnScroller').outerHeight(true)-$('#LeftColumnScroller').height();$('#LeftColumnScroller').height($('#LeftColumnBorder').height()-$('#LeftColumnScroller').position().top-leftColumnScrollerHeightDiff);$('#LeftColumn').width(Math.max(100,Math.min($('#Columns').width()-200,$('#LeftColumn').width())))}if($('#Report').is(':visible')){var reportHeightDiff=$('#Report').outerHeight(true)-$('#Report').height();$('#Report').height($('#RightColumn').height()-reportHeightDiff-$('#Report').position().top)}}})})(jQuery);(function($){Controller.prototype.inits.push(function(){var self=this;$('#ErrorCount').data('count',0).click(function(){$('#ErrorsDialog').dialog('open')}).disableTextSelection();$('#ErrorsDialog').dialog({backgroundColor:'#FFF',borderColor:'#CC0000',opening:function(e,contents){self.populateErrors(contents)}})});$.extend(Controller.prototype,{_errors:[],reportError:function(message,detail){this.reportErrors([[message,detail]])},reportErrors:function(errors){this._errors.push.apply(this._errors,errors);$('#ErrorCount').show().find('span').text(this._errors.length)},populateErrors:function(contents){contents.empty();for(var i=0;i<this._errors.length;i++){var errorItem=$('<div>').addClass('errors-item').html($('<b>').html($.isArray(this._errors[i][0])?this.translate.apply(this,this._errors[i][0]):this._errors[i][0])).appendTo(contents);if(this._errors[i][1])errorItem.append(this._errors[i][1])}}})})(jQuery);(function($){$.extend(Controller.prototype,{_ajaxErrorHandler:function(xhr,status,err){var parts=[],self=this;switch(status){case'parsererror':if(this._ajaxStage=='directories'){$('#Loading').append($('<div>').html(this.translate('parse_error_skip_dirs',$('<span class="link"></span>').html(this.translate('parse_error_skip_dirs_link')).click(function(){self._skipDirectoryList.apply(self,arguments);return false}))))}else{$('#Loading').append($('<div>').html(this.translate('parse_error')))}break;case'timeout':if(this._ajaxStage=='directories'){$('#Loading').append($('<div>').html(this.translate('timeout_error_skip_dirs',$('<span class="link"></span>').html(this.translate('timeout_error_skip_dirs_link')).click(function(){self._skipDirectoryList.apply(self,arguments);return false}))))}else{$('#Loading').append($('<div>').html(this.translate('timeout_error')))}break;case'error':switch(xhr.status){case 404:if(this._ajaxStage=='directories'){$('#Loading').append($('<div>').html(this.translate('directory_notfound_error',$('<span class="link"></span>').html(this.translate('directory_notfound_error_link')).click(function(){self._skipDirectoryList.apply(self,arguments);return false}))))}else{$('#Loading').append($('<div>').html(this.translate('settings_notfound_error')))}break;case 401:$('#Loading').append($('<div>').html(this.translate('username_required')));break;default:if(this._ajaxStage=='directories'){$('#Loading').append($('<div>').html(this.translate('directory_unknown_status_error',xhr.status,$('<span class="link"></span>').html(this.translate('directory_unknown_status_error_link')).click(function(){self._skipDirectoryList.apply(self,arguments);return false}))))}else{$('#Loading').append($('<div>').html(this.translate('unknown_status_error',xhr.status+'')))}}break;default:if(!status&&xhr.status==0&&window.location.protocol=='file:'){if(this._ajaxStage=='directories'){$('#Loading').append($('<div>').html(this.translate('directory_notfound_error',$('<span class="link"></span>').html(this.translate('directory_notfound_error_link')).click(function(){self._skipDirectoryList.apply(self,arguments);return false}))))}else{$('#Loading').append($('<div>').html(this.translate('settings_notfound_error')))}}else{if(this._ajaxStage=='directories'){$('#Loading').append($('<div>').html(this.translate('directory_unknown_status_error',!status?'N/A':status,$('<span class="link"></span>').html(this.translate('directory_unknown_status_error_link')).click(function(){self._skipDirectoryList.apply(self,arguments);return false}))))}else{$('#Loading').append($('<div>').html(this.translate('unknown_status_error',!status?'N/A':status)))}}}},_downloadSettings:function(){var self=this;this._ajaxStage='settings';$.ajax({cache:false,url:this.reportsBaseURL+this.report+'/settings',type:'GET',dataType:'json',error:function(){self._ajaxErrorHandler.apply(self,arguments)},success:function(settings,status,xhr){self.settings=settings;self._processSettings(settings)}})},_processSettings:function(){var self=this;this._languageChangeStatic('title');this._languageChangeStatic('footer');this._processErrors();var disableTree=($.browser.msie&&$.browser.version.match(/^[67]\./)!=null);if(this.settings.directorytree&&!disableTree){$('#Loading').html(this.translate('loading_directories'));this._debugTimeoutFn(function(){self._downloadDirectories()},this._debugTimeout)}else{$('#LeftColumn, #LeftColumnResizer').hide();this._finalSetup(null)}},_processErrors:function(){var self=this,errors=[];if(this.settings.errors.length>0){var errorContents=$('#ErrorsDialog').dialog('contents');for(var i=0;i<this.settings.errors.length;i++){var detail='',errorTitle='';if($.isString(this.settings.errors[i])){errorTitle=['unknown_processing_error',this.settings.errors[i]]}else{switch(this.settings.errors[i][0]){case'invalidline':switch(this.settings.errors[i][1]){case'regex':errorTitle=['invalidline_error_regex'];detail+='<div style="overflow: auto; width: 100%;">'+this.settings.errors[i][2].htmlencode()+'</div>';break;case'maxlinelength':errorTitle=['invalidline_error_maxlinelength',this.settings.errors[i][2].length];detail+='<div style="overflow: auto; width: 100%;">'+this.settings.errors[i][2].htmlencode()+'</div>';break;case'columncount':errorTitle=['invalidline_error_columncount',this.settings.errors[i][2].length];detail+='<table class="styledtable" border="1" cellspacing="0" cellpadding="4"><tbody><tr class="odd">';for(var c=0;c<this.settings.errors[i][2].length;c++){detail+='<td>'+this.settings.errors[i][2][c].htmlencode()+'</td>'}detail+='</tr></tbody></table>';break;case'column':errorTitle=['invalidline_error_column',this.settings.errors[i][2]];detail+='<table class="styledtable" border="1" cellspacing="0" cellpadding="4"><tbody><tr class="odd">';for(var c=0;c<this.settings.errors[i][4].length;c++){detail+='<td '+(c==this.settings.errors[i][3]?' style="background-color: #FF0;"':'')+'>'+this.settings.errors[i][4][c].htmlencode()+'</td>'}detail+='</tr></tbody></table>';break;default:errorTitle=['invalidline_error_unknown',this.settings.errors[i][1]]}break;case'writefail':errorTitle=['writefail_error',this.settings.errors[i][2]];detail+='<div style="overflow: auto; width: 100%;">'+this.settings.errors[i][1].htmlencode()+'</div>';break;case'finderror':switch(this.settings.errors[i][1]){case'STAT_FAIL':errorTitle=['find_stat_error'];detail+='<div style="overflow: auto; width: 100%;">'+this.settings.errors[i][2].htmlencode()+'</div>';break;case'OPENDIR_FAIL':errorTitle=['find_opendir_error'];detail+='<div style="overflow: auto; width: 100%;">'+this.settings.errors[i][2].htmlencode()+'</div>';break;default:errorTitle=['find_unknown_error'];detail+='<table class="styledtable" border="1" cellspacing="0" cellpadding="4"><tbody><tr class="odd">';for(var c=1;c<this.settings.errors[i].length;c++){detail+='<td>'+this.settings.errors[i][c].htmlencode()+'</td>'}detail+='</tr></tbody></table>'}break;default:errorTitle=['unknown_error'];detail+='<table class="styledtable" border="1" cellspacing="0" cellpadding="4"><tbody><tr class="odd">';for(var c=0;c<this.settings.errors[i].length;c++){detail+='<td>'+this.settings.errors[i][c].htmlencode()+'</td>'}detail+='</tr></tbody></table>'}}errors.push([errorTitle,detail!=''?detail:undefined])}this.reportErrors(errors)}},_downloadDirectories:function(){var self=this;this._timeout_skip=setTimeout(function(){$('#Loading').append($('<div>').html(self.translate('directory_skip',$('<span class="link"></span>').html(self.translate('directory_skip_link')).click(function(){self._skipDirectoryList.apply(self,arguments);return false}))))},5000);this._ajaxStage='directories';this._xhr_directories=$.ajax({cache:false,url:this.reportsBaseURL+this.report+'/directories',type:'GET',dataType:'json',error:function(){if(self.settings.directorytree)self._ajaxErrorHandler.apply(self,arguments)},success:function(directories,status,xhr){self.directories=directories;if($.isUndefined(directories[self.settings.root])){$('#Loading').append($('<div>').html(self.translate('directory_root_notfound',$('<span class="link"></span>').html(self.translate('directory_root_notfound_link')).click(function(){self._skipDirectoryList.apply(self,arguments);return false}))))}else if(self.settings.directorytree){self._finalSetup()}},complete:function(){if(self._timeout_skip)clearTimeout(self._timeout_skip);$('#DirectoryListSkip').remove()}})},_skipDirectoryList:function(){this.settings.directorytree=false;if(this._xhr_directories)this._xhr_directories.abort();$('#LeftColumn, #LeftColumnResizer').hide();this._finalSetup(null)},_finalSetup:function(){var self=this;$('#Loading').html(this.translate('displaying_report'));this._debugTimeoutFn(function(){self._setupTabs();self._setupColHeaders();if(self.directories){$('#LeftColumnResizer').disableTextSelection().mousedown(function(evDown){var startX=evDown.screenX,origWidth=$('#LeftColumn').width(),resizeTimeout,resizeCounter=0,resizeFn=function(evMove){resizeCounter=0;$('#LeftColumn').width(Math.max(100,Math.min($('#Columns').width()-200,origWidth+evMove.screenX-startX)))};$(document).bind('mousemove.resizer',function(evMove){if(resizeCounter>=250){resizeFn(evMove)}else{if(resizeTimeout)clearTimeout(resizeTimeout);resizeTimeout=setTimeout(function(){resizeFn(evMove)},resizeCounter+=75)}});$(document).one('mouseup',function(evUp){$(document).unbind('mousemove.resizer')})});self._tree=$('#DirectoryTree').tree({data:self.directories,root:self.settings.root,selection:function(e,hash,files){if(files)self.setOptions({hash:hash,section:'files'});else self.setOptions({hash:hash})},comparator:function(a,b){if(self.options){var modifier=self.options.treeSortRev?-1:1;if(self.options.treeSortBy=='byte'){if(parseInt(a.totalbytes)<parseInt(b.totalbytes))return-1*modifier;if(parseInt(a.totalbytes)>parseInt(b.totalbytes))return 1*modifier}else if(self.options.treeSortBy=='num'){if(parseInt(a.totalnum)<parseInt(b.totalnum))return-1*modifier;if(parseInt(a.totalnum)>parseInt(b.totalnum))return 1*modifier}else if(a.files&&!b.files){return 1*modifier}else if(!a.files&&b.files){return-1*modifier}else if(a.files&&b.files){return 0}else{if(a.name.toLowerCase()<b.name.toLowerCase())return-1*modifier;if(a.name.toLowerCase()>b.name.toLowerCase())return 1*modifier}}if(a.name.toLowerCase()<b.name.toLowerCase())return-1;if(a.name.toLowerCase()>b.name.toLowerCase())return 1;return 0},getPrefix:function(data,parentdata){if(!data||!parentdata||!self.options||self.options.treeSortBy=='label')return null;var percent=data[self.options.treeSortBy=='byte'?'totalbytes':'totalnum']/parentdata[self.options.treeSortBy=='byte'?'totalbytes':'totalnum']*100;if(percent<1)return'<1%';else return Math.round(percent)+'%'}})}$.history.addHandler(function(token){self.setLocation(token)});self.setLocation($.history.getToken(),function(){$('#Loading').hide();$('#Columns').show();self.resizeWindow();$('#LeftColumnScroller').scrollIntoView($('#DirectoryTree li.selected'))})},this._debugTimeout)},_setupTabs:function(){var self=this;$('#Tabs li').disableTextSelection();$('#Tab_SubDirs').click(function(){self.setOptions({page:1,'section':'subdirs'})});$('#Tab_Modified').click(function(){self.setOptions({page:1,'section':'modified'})});$('#Tab_Types').click(function(){self.setOptions({page:1,'section':'types'})});$('#Tab_Sizes').click(function(){self.setOptions({page:1,'section':'sizes'})});$('#Tab_Files').click(function(){self.setOptions({page:1,'section':'files'})});$('#Tab_Top100').click(function(){self.setOptions({page:1,'section':'top100'})})},_setupColHeaders:function(){var self=this;$('#Sections .totals-sortby-label').disableTextSelection().click(function(){self.setOptions({page:1,totalsSortBy:'label',totalsSortRev:self.options.totalsSortBy=='label'?!self.options.totalsSortRev:false})});$('#Sections .totals-sortby-byte').disableTextSelection().click(function(){self.setOptions({page:1,totalsSortBy:'byte',totalsSortRev:self.options.totalsSortBy=='byte'?!self.options.totalsSortRev:true})});$('#Sections .totals-sortby-num').disableTextSelection().click(function(){self.setOptions({page:1,totalsSortBy:'num',totalsSortRev:self.options.totalsSortBy=='num'?!self.options.totalsSortRev:true})});$('#Files-SortBy-name').disableTextSelection().click(function(){self.setOptions({page:1,filesSortBy:'name',filesSortRev:self.options.filesSortBy=='name'?!self.options.filesSortRev:false})});$('#Files-SortBy-type').disableTextSelection().click(function(){self.setOptions({page:1,filesSortBy:'type',filesSortRev:self.options.filesSortBy=='type'?!self.options.filesSortRev:false})});$('#Files-SortBy-size').disableTextSelection().click(function(){self.setOptions({page:1,filesSortBy:'size',filesSortRev:self.options.filesSortBy=='size'?!self.options.filesSortRev:true})});$('#Files-SortBy-modified').disableTextSelection().click(function(){self.setOptions({page:1,filesSortBy:'modified',filesSortRev:self.options.filesSortBy=='modified'?!self.options.filesSortRev:false})});$('#Top100-SortBy-name').disableTextSelection().click(function(){self.setOptions({top100SortBy:'name',top100SortRev:self.options.top100SortBy=='name'?!self.options.top100SortRev:false})});$('#Top100-SortBy-type').disableTextSelection().click(function(){self.setOptions({top100SortBy:'type',top100SortRev:self.options.top100SortBy=='type'?!self.options.top100SortRev:false})});$('#Top100-SortBy-size').disableTextSelection().click(function(){self.setOptions({top100SortBy:'size',top100SortRev:self.options.top100SortBy=='size'?!self.options.top100SortRev:true})});$('#Top100-SortBy-modified').disableTextSelection().click(function(){self.setOptions({top100SortBy:'modified',top100SortRev:self.options.top100SortBy=='modified'?!self.options.top100SortRev:false})});$('#Top100-SortBy-path').disableTextSelection().click(function(){self.setOptions({top100SortBy:'path',top100SortRev:self.options.top100SortBy=='path'?!self.options.top100SortRev:false})});$('#LeftColumn .tree-sortby-label').disableTextSelection().click(function(){self.setOptions({treeSortBy:'label',treeSortRev:self.options.treeSortBy=='label'?!self.options.treeSortRev:false})});$('#LeftColumn .tree-sortby-byte').disableTextSelection().click(function(){self.setOptions({treeSortBy:'byte',treeSortRev:self.options.treeSortBy=='byte'?!self.options.treeSortRev:true})});$('#LeftColumn .tree-sortby-num').disableTextSelection().click(function(){self.setOptions({treeSortBy:'num',treeSortRev:self.options.treeSortBy=='num'?!self.options.treeSortRev:true})})}})})(jQuery);(function($){$.extend(Controller.prototype,{_populateReport:function(force){this._languageChangeStatic('title');if(this._data){if(force||this._lastSectionOptions!=''.concat(this.options.section,this.options.totalsSortBy,this.options.totalsSortRev,this.options.filesSortBy,this.options.filesSortRev,this.options.top100SortBy,this.options.top100SortRev,this.options.page)){this._lastSectionOptions=''.concat(this.options.section,this.options.totalsSortBy,this.options.totalsSortRev,this.options.filesSortBy,this.options.filesSortRev,this.options.top100SortBy,this.options.top100SortRev,this.options.page);var fullPath='';$('#Path').empty();for(var i=0;i<this._data.parents.length;i++){var pathLink=$('<a>').attr('href','#'+this._createLocation({hash:this._data.parents[i].hash},'path')).text(this._data.parents[i].name).appendTo('#Path');if(this._data.parents[i].name==this.settings.ds){pathLink.addClass('root')}else{$('#Path').append('<span>'+this.settings.ds+'</span>')}fullPath+=(fullPath==''?'':this.settings.ds)+this._data.parents[i].name}$('#Path').append(this._data.name.htmlencode());var summary=this.translate('total_size',FormatBytes(this._data.totalbytes),FormatBytes(this._data.bytes))+'<br/>'+this.translate('total_files',AddCommas(this._data.totalnum),AddCommas(this._data.num));if(this.settings.path){summary+='<br/>'+this.translate('full_path',this.settings.path+(this.settings.path==this.settings.ds?'':this.settings.ds)+fullPath+(fullPath==''?'':this.settings.ds)+this._data.name)}$('#DirSummary').html(summary);$('#Sections').removeClass('totals-sortedby-label totals-sortedby-byte totals-sortedby-num files-sortedby-name files-sortedby-type files-sortedby-size files-sortedby-modified top100-sortedby-name top100-sortedby-type top100-sortedby-size top100-sortedby-modified top100-sortedby-path').addClass('totals-sortedby-'+this.options.totalsSortBy+' files-sortedby-'+this.options.filesSortBy+' top100-sortedby-'+this.options.top100SortBy)[(this.options.totalsSortRev?'add':'remove')+'Class']('totals-sortrev')[(this.options.filesSortRev?'add':'remove')+'Class']('files-sortrev')[(this.options.top100SortRev?'add':'remove')+'Class']('top100-sortrev');$('#Section_Message').hide().text('');switch(this.options.section){case'modified':this._displayModified();break;case'types':this._displayTypes();break;case'sizes':this._displaySizes();break;case'files':this._displayFiles();break;case'top100':this._displayTop100();break;default:this._displaySubDirs()}}if(this._lastSection!=this.options.section){this._lastSection=this.options.section;$('#Report').get(0).scrollTop=0}}if(this.directories&&this._lastTreeOptions!=''.concat(this.options.treeSortBy,this.options.treeSortRev)){$('#LeftColumn').removeClass('tree-sortedby-label tree-sortedby-byte tree-sortedby-num').addClass('tree-sortedby-'+this.options.treeSortBy)[(this.options.treeSortRev?'add':'remove')+'Class']('tree-sortrev');this._lastTreeOptions=''.concat(this.options.treeSortBy,this.options.treeSortRev);this._tree.tree('resort')}},_displaySubDirs:function(){var self=this;$('> div',this._sections).hide();var subdirs=this._data.subdirs.slice(0);subdirs.push({isfiles:true,totalbytes:this._data.bytes,totalnum:this._data.num});if(parseInt(this._data.totalnum)==0&&this._data.subdirs.length==0){$('#Section_Message').html(this.translate('notice_no_files_incl_sub')).show()}else{this._displayTotalsTable($('#SubDirs'),subdirs,function(data,field){switch(field){case'label':if(data.isfiles)return'<i>'+self.translate('contents_files_in_this_directory')+'</i>';return'<a href="#'+self._createLocation({hash:data.hash},'contents').htmlencode()+'">'+data.name.htmlencode()+'</a>';case'sortlabel':if(data.isfiles)return'';return data.name.toLowerCase();case'bytes':return parseInt(data.totalbytes);case'num':return parseInt(data.totalnum)}},true);this._subdirsSection.show()}$('#Tabs li').removeClass('selected');$('#Tab_SubDirs').addClass('selected')},_displayModified:function(){var self=this;$('> div',this._sections).hide();if(!this._data.modified){$('#Section_Message').html(this.translate('notice_no_info_at_depth')).show()}else if(this._data.modified.length==0){$('#Section_Message').html(this.translate('notice_no_files_incl_sub')).show()}else{this._displayTotalsTable($('#Modified'),this._data.modified,function(data,field,key){switch(field){case'label':return self.settings.modified[key].label;case'sortlabel':return parseInt(key);case'bytes':return data[0];case'num':return data[1]}});this._modifiedSection.show()}$('#Tabs li').removeClass('selected');$('#Tab_Modified').addClass('selected')},_displayTypes:function(){var self=this;$('> div',this._sections).hide();if(!this._data.types){$('#Section_Message').html(this.translate('notice_no_info_at_depth')).show()}else if(this._data.types.length==0){$('#Section_Message').html(this.translate('notice_no_files_incl_sub')).show()}else{this._displayTotalsTable($('#Types'),this._data.types,function(data,field,key){switch(field){case'label':return key==''?'<i>'+self.translate('unknown_file_type')+'</i>':key.htmlencode();case'sortlabel':return key.toLowerCase();case'bytes':return data[0];case'num':return data[1]}},true);this._typesSection.show()}$('#Tabs li').removeClass('selected');$('#Tab_Types').addClass('selected')},_displaySizes:function(){var self=this;$('> div',this._sections).hide();if(!this._data.types){$('#Section_Message').html(this.translate('notice_no_info_at_depth')).show()}else if(this._data.sizes.length==0){$('#Section_Message').html(this.translate('notice_no_files_incl_sub')).show()}else{this._displayTotalsTable($('#Sizes'),this._data.sizes,function(data,field,key){switch(field){case'label':return self.settings.sizes[parseInt(key)].label;case'sortlabel':return parseInt(key);case'bytes':return data[0];case'num':return data[1]}});this._sizesSection.show()}$('#Tabs li').removeClass('selected');$('#Tab_Sizes').addClass('selected')},_displayTotalsTable:function(table,data,getValue,htmlLabel){var self=this;var tbody=$('> tbody',table);var tfoot=$('> tfoot',table);tbody.empty();var totalBytes=0;var totalNum=0;var rows=[];for(var key in data){var label=getValue(data[key],'label',key);var sortValue=sortLabel=getValue(data[key],'sortlabel',key);var bytes=getValue(data[key],'bytes',key);var num=getValue(data[key],'num',key);totalBytes+=parseInt(bytes);totalNum+=parseInt(num);switch(this.options.totalsSortBy){case'byte':sortValue=parseInt(bytes);break;case'num':sortValue=parseInt(num);break}var html='';html+='<td class="totals-col-label">'+(htmlLabel?label:label.htmlencode())+'</td>';var bytePerCent=parseInt(10000*parseInt(bytes)/Math.max(1,parseInt(this._data.totalbytes)))/100;var byteColorIndex=Math.max(1,Math.floor(this.gradient.length*bytePerCent/100))-1;html+='<td class="totals-col-byte" align="right">'+FormatBytes(bytes)+'</td>';html+='<td class="totals-col-byte" align="right">'+bytePerCent.toFixed(2)+'%'+'</td>';html+='<td class="totals-col-byte"><div class="percentbar"><div style="width: '+bytePerCent+'%; background-color: #'+this.gradient[byteColorIndex]+';">&nbsp;</div></div></td>';var numPerCent=parseInt(10000*parseInt(num)/Math.max(1,parseInt(this._data.totalnum)))/100;var numColorIndex=Math.max(1,Math.floor(this.gradient.length*numPerCent/100))-1;html+='<td class="totals-col-num" align="right">'+AddCommas(num)+'</td>';html+='<td class="totals-col-num" align="right">'+numPerCent.toFixed(2)+'%'+'</td>';html+='<td class="totals-col-num"><div class="percentbar"><div style="width: '+numPerCent+'%; background-color: #'+this.gradient[numColorIndex]+';">&nbsp;</div></div></td>';var index=BinarySearch(rows,[sortValue,sortLabel],function(needle,item,index){var modifier=self.options.totalsSortRev?-1:1;if(needle[0]<item[0])return-1*modifier;if(needle[0]>item[0])return 1*modifier;if(needle[1]<item[1])return-1;if(needle[1]>item[1])return 1;return 0});if(index<0){rows.splice(Math.abs(index)-1,0,[sortValue,sortLabel,html])}else{rows.splice(index,0,[sortValue,sortLabel,html])}}var iStart=0,iEnd=rows.length;if(rows.length>this.pageMax){iStart=(this.options.page-1)*this.pageMax;iEnd=Math.min(rows.length,this.options.page*this.pageMax);this._displayPager(rows.length)}var finalHTML='';for(var i=iStart;i<iEnd;i++){finalHTML+='<tr class="'+(i%2==0?'odd':'even')+'">'+rows[i][2]+'</tr>'}tbody.html(finalHTML);$('td:eq(1)',tfoot).text(FormatBytes(totalBytes)+' ('+AddCommas(totalBytes)+')');$('td:eq(2)',tfoot).text(AddCommas(totalNum))},_displayPager:function(length){$('.pager').show();var lastPage=Math.ceil(length/this.pageMax);this.options.page=Math.max(1,Math.min(lastPage,this.options.page));$('.pager-prev')[this.options.page==1?'addClass':'removeClass']('disabled').attr('href','#'+this._createLocation({page:Math.max(1,this.options.page-1)},'pager'));$('.pager-next')[this.options.page==lastPage?'addClass':'removeClass']('disabled').attr('href','#'+this._createLocation({page:Math.min(lastPage,this.options.page+1)},'pager'));$('.pager-range').html(this.translate('displayed_rows',(this.options.page-1)*this.pageMax+1,Math.min(length,this.options.page*this.pageMax),length));$('.pager-pages').html('<span>'+this.translate('page_list_label')+':</span>');if(this.options.page>5){$('.pager-pages').append($('<a href="#'+this._createLocation({page:1},'pager').htmlencode()+'">1</a>'));if(this.options.page>6)$('.pager-pages').append($('<span>...</span>'))}for(var i=Math.max(1,this.options.page-4);i<=Math.min(this.options.page+4,lastPage);i++){$('.pager-pages').append($('<a class="'+(this.options.page==i?'selected':'')+'" href="#'+this._createLocation({page:i},'pager').htmlencode()+'">'+i+'</a>'))}if(this.options.page<lastPage-4){if(this.options.page<lastPage-5)$('.pager-pages').append($('<span>...</span>'));$('.pager-pages').append($('<a href="#'+this._createLocation({page:lastPage},'pager').htmlencode()+'">'+lastPage+'</a>'))}},_displayFiles:function(){var self=this;$('> div',this._sections).hide();if(this._data.files.length==0){$('#Section_Message').html(this.translate('notice_no_files')).show()}else{var tbody=$('#Files > tbody').empty();var totalBytes=0;var totalNum=0;var data=this._data.files;var rows=[];for(var key in data){var extData='',ext=data[key].name.toLowerCase().split('.');if(ext.length>1)ext=(extData=ext[ext.length-1]).htmlencode();else ext="<i>"+this.translate('unknown_file_type')+"</i>";var sortValue=data[key].name.toLowerCase();switch(this.options.filesSortBy){case'type':sortValue=extData;break;case'size':sortValue=parseInt(data[key].size);break;case'modified':sortValue=data[key].date+' '+data[key].time;break}var html='';html+='<td>'+data[key].name.htmlencode()+'</td>';html+='<td align="center">'+ext+'</td>';html+='<td align="right">'+FormatBytes(data[key].size)+'</td>';html+='<td>'+data[key].date+' '+data[key].time+'</td>';var index=BinarySearch(rows,[sortValue,data[key].name.toLowerCase()],function(needle,item,index){var modifier=self.options.filesSortRev?-1:1;if(needle[0]<item[0])return-1*modifier;if(needle[0]>item[0])return 1*modifier;if(needle[1]<item[1])return-1;if(needle[1]>item[1])return 1;return 0});if(index<0){rows.splice(Math.abs(index)-1,0,[sortValue,data[key].name.toLowerCase(),html])}else{rows.splice(index,0,[sortValue,data[key].name.toLowerCase(),html])}}var iStart=0,iEnd=rows.length;if(rows.length>this.pageMax){iStart=(this.options.page-1)*this.pageMax;iEnd=Math.min(rows.length,this.options.page*this.pageMax);this._displayPager(rows.length)}var finalHTML='';for(var i=iStart;i<iEnd;i++){finalHTML+='<tr class="'+(i%2==0?'odd':'even')+'">'+rows[i][2]+'</tr>'}tbody.html(finalHTML);this._filesSection.show()}$('#Tabs li').removeClass('selected');$('#Tab_Files').addClass('selected')},_displayTop100:function(){var self=this;$('> div',this._sections).hide();if(!this._data.top100){$('#Section_Message').html(this.translate('notice_no_info_at_depth')).show()}else if(this._data.top100.length==0){$('#Section_Message').html(this.translate('notice_no_files_incl_sub')).show()}else{var tbody=$('#Top100 > tbody').empty();var totalBytes=0;var totalNum=0;var data=this._data.top100;var rows=[];for(var key in data){var extData='',ext=data[key].name.toLowerCase().split('.');if(ext.length>1)ext=(extData=ext[ext.length-1]).htmlencode();else ext="<i>Unknown</i>";var sortValue=data[key].name.toLowerCase();switch(this.options.top100SortBy){case'type':sortValue=extData;break;case'size':sortValue=parseInt(data[key].size);break;case'modified':sortValue=data[key].date+' '+data[key].time;break;case'path':sortValue=data[key].path;break}var html='';html+='<td>'+data[key].name.htmlencode()+'</td>';html+='<td align="center">'+ext+'</td>';html+='<td align="right">'+FormatBytes(data[key].size)+'</td>';html+='<td>'+data[key].date+' '+data[key].time+'</td>';html+='<td><a href="#'+this._createLocation({hash:data[key].hash,section:'files'},'top100').htmlencode()+'">'+data[key].path.replace(new RegExp(RegExp.escape(this.settings.ds),'g'),this.settings.ds+' ').htmlencode()+'</a></td>';var index=BinarySearch(rows,[sortValue,data[key].name],function(needle,item,index){var modifier=self.options.top100SortRev?-1:1;if(needle[0]<item[0])return-1*modifier;if(needle[0]>item[0])return 1*modifier;if(needle[1]<item[1])return-1*modifier;if(needle[1]>item[1])return 1*modifier;return 0});if(index<0){rows.splice(Math.abs(index)-1,0,[sortValue,data[key].name,html])}else{rows.splice(index,0,[sortValue,data[key].name,html])}}var iStart=0,iEnd=rows.length;if(rows.length>this.pageMax){iStart=(this.options.page-1)*this.pageMax;iEnd=Math.min(rows.length,this.options.page*this.pageMax);this._displayPager(rows.length)}var finalHTML='';for(var i=iStart;i<iEnd;i++){finalHTML+='<tr class="'+(i%2==0?'odd':'even')+'">'+rows[i][2]+'</tr>'}tbody.html(finalHTML);this._top100Section.show()}$('#Tabs li').removeClass('selected');$('#Tab_Top100').addClass('selected')}})})(jQuery);(function($){Controller.prototype.inits.push(function(){var self=this;$('#ChangeLanguage').live('click',function(){$('#LanguageDialog').dialog('open')});$('#LanguageDialog').dialog({opening:function(e,contents){contents.empty();var langs=self.getSupportedLanguages(true);var ul=$('<ul>');$.each(langs,function(i,lang){$('<a href="#"></a>').click(function(e){e.preventDefault();self.setLanguage(lang);$('#LanguageDialog').dialog('close')}).text(self.getLanguageName(lang)).appendTo($('<li>').appendTo(ul))});ul.appendTo(contents)},backgroundColor:'#FFF'})});$.extend(Controller.prototype,{defaultLanguage:'en-us',language:null,_languages:{},translate:function(){arguments=$.makeArray(arguments);if(!this.isLanguageLoaded(this.language)){this.reportError("The language file for '"+this.language+"' has not been loaded.");return''}var key=arguments.shift(),translation=this._languages[this.language][key],parts=[],isTextOnly=true,argIndex,lastIndex=0,match,re=new RegExp('{([0-9])}','g');if(!$.isString(translation)){this.reportError("A translation for '"+key+"' does not exist.");return''}else{while(match=re.exec(translation)){if(lastIndex<match.index){parts.push(document.createTextNode(translation.substring(lastIndex,match.index)))}argIndex=parseInt(match[1])-1;if($.isUndefined(arguments[argIndex])||arguments[argIndex]==null){throw'Replacement not passed to Controller.translate() for '+match[0]+' in '+key}else if($.isString(arguments[argIndex])||$.isNumber(arguments[argIndex])){parts.push(document.createTextNode(arguments[argIndex]+''))}else if(arguments[argIndex].toArray){parts.push.apply(parts,arguments[argIndex].toArray());isTextOnly=false}else{throw'Invalid argument for Controller.translate(). Must be string or jQuery object.'}lastIndex=re.lastIndex}if(lastIndex!=translation.length){parts.push(document.createTextNode(translation.substr(lastIndex)))}if(isTextOnly){return $(parts).text()}else{return $(parts)}}},isSupportedLanguage:function(lang){return lang&&$.isDefined(this._languages[lang.toLowerCase()])},isLanguageLoaded:function(lang){return this.isSupportedLanguage(lang)&&!$.isString(this._languages[lang])},addLanguage:function(lang,name){if($.isString(lang))lang=[[lang,name]];for(var i=0;i<lang.length;i++)if($.isUndefined(this._languages[lang[i][0].toLowerCase()]))this._languages[lang[i][0].toLowerCase()]=lang[i][1]},setLanguage:function(rules,returnFn){var self=this,matches=this.matchSupportedLanguagesToRules(rules);var lang=matches.length?matches[0].lang:this.defaultLanguage;if(this._preLoad){this.language=lang}else{this.loadLanguage(lang,function(ret,message){if(ret){self.language=lang;self._languageChangeStatic();self._populateReport(true)}if($.isFunction(returnFn))returnFn(ret,message)})}},loadLanguage:function(lang,returnFn){var self=this;if(!this.isSupportedLanguage(lang)){if($.isFunction(returnFn))returnFn(false,'Unsupported language: '+lang)}else if($.isString(this._languages[lang])){try{if(this._langXHR)this._langXHR.abort();this._langXHR=$.ajax({url:'lang/'+lang+'.txt',dataType:'json',error:function(xhr,status,ex){if(status=='abort')return;var msg;switch(status){case'parsererror':msg='Invalid JSON syntax:';break;case'timeout':msg='Timed out while downloading';break;case'error':switch(xhr.status){case 404:msg='404 Not Found:';break;case 401:msg='401 Unauthorized:';break;default:msg='HTTP Status '+xhr.status+':'}break;default:msg='Unknown Error'}if($.isFunction(returnFn))returnFn(false,msg+' lang/'+lang+'.txt')},success:function(data,status,xhr){if(data){if($.isString(data['extends'])){self.loadLanguage(data['extends'],function(ret,message){self._languages[lang]=$.extend({},self._languages[data['extends']],data);returnFn(ret,message)})}else{if($.isFunction(returnFn))self._languages[lang]=data;returnFn(true)}}}})}catch(e){if($.isFunction(returnFn))returnFn(false,'AJAX exception: lang/'+lang+'.txt')}}else{if($.isFunction(returnFn))returnFn(true)}},_languageChangeStatic:function(part){if(!part||part=='title'){var titleArgs=['title'],doctitleArgs=['doctitle'];if(this.settings&&this.settings.name){titleArgs[0]+='_with_name';titleArgs.push($('<b>').text(this.settings.name));doctitleArgs[0]+='_with_name';doctitleArgs.push(this.settings.name)}if(this._data&&this._data.name){doctitleArgs[0]+='_with_dir';doctitleArgs.push(this._data.name)}$('#Title').html(this.translate.apply(this,titleArgs)).show();document.title=this.translate.apply(this,doctitleArgs)}if(!part||part=='errors'){var errorsCount=this.translate('errors_button','<span>'+this._errors.length+'</span>'),errorsDialog=this.translate('errors_title');$('#ErrorCount').html(errorsCount==''?'Errors: <span>'+this._errors.length+'</span>':errorsCount);$('#ErrorsDialog').dialog('option','title',errorsDialog==''?'Errors:':errorsDialog)}if(!part||part=='tree'){$('#TreeSort .tree-sortby-label span').html(this.translate('tree_header_name'));$('#TreeSort .tree-sortby-byte span').html(this.translate('tree_header_size'));$('#TreeSort .tree-sortby-num span').html(this.translate('tree_header_count'));$('#DirectoryTree li.ui-tree-files span.ui-tree-label').html(this.translate('tree_files_in_this_directory'))}if(!part||part=='tabs'){$('#Tab_SubDirs').html(this.translate('tab_contents'));$('#Tab_Files').html(this.translate('tab_file_list'));$('#Tab_Modified').html(this.translate('tab_last_modified'));$('#Tab_Sizes').html(this.translate('tab_file_sizes'));$('#Tab_Types').html(this.translate('tab_file_types'));$('#Tab_Top100').html(this.translate('tab_top_100'))}if(!part||part=='pager'){$('#Sections .pager-prev').html(this.translate('prev_page_button'));$('#Sections .pager-next').html(this.translate('next_page_button'))}if(!part||part=='sections'){$('#SubDirs > thead .totals-sortby-label span').html(this.translate('contents_header_name'));$('#SubDirs > thead .totals-sortby-byte span').html(this.translate('contents_header_total_size'));$('#SubDirs > thead .totals-sortby-num span').html(this.translate('contents_header_file_count'));$('#SubDirs > tfoot td:eq(0)').html(this.translate('table_footer_total'));$('#Files-SortBy-name span').html(this.translate('file_list_header_name'));$('#Files-SortBy-type span').html(this.translate('file_list_header_type'));$('#Files-SortBy-size span').html(this.translate('file_list_header_size'));$('#Files-SortBy-modified span').html(this.translate('file_list_header_modified'));$('#Modified > thead .totals-sortby-label span').html(this.translate('last_modified_header_age'));$('#Modified > thead .totals-sortby-byte span').html(this.translate('last_modified_header_total_size'));$('#Modified > thead .totals-sortby-num span').html(this.translate('last_modified_header_file_count'));$('#Modified > tfoot td:eq(0)').html(this.translate('table_footer_total'));$('#Sizes > thead .totals-sortby-label span').html(this.translate('file_sizes_header_range'));$('#Sizes > thead .totals-sortby-byte span').html(this.translate('file_sizes_header_total_size'));$('#Sizes > thead .totals-sortby-num span').html(this.translate('file_sizes_header_file_count'));$('#Sizes > tfoot td:eq(0)').html(this.translate('table_footer_total'));$('#Types > thead .totals-sortby-label span').html(this.translate('file_types_header_extension'));$('#Types > thead .totals-sortby-byte span').html(this.translate('file_types_header_total_size'));$('#Types > thead .totals-sortby-num span').html(this.translate('file_types_header_file_count'));$('#Types > tfoot td:eq(0)').html(this.translate('table_footer_total'));$('#Top100-SortBy-name span').html(this.translate('top_100_header_name'));$('#Top100-SortBy-type span').html(this.translate('top_100_header_type'));$('#Top100-SortBy-size span').html(this.translate('top_100_header_size'));$('#Top100-SortBy-modified span').html(this.translate('top_100_header_modified'));$('#Top100-SortBy-path span').html(this.translate('top_100_header_path'))}if(!part||part=='footer'){$('#Footer').html(this.translate(this.settings?'footer_with_created':'footer',this.settings?this.settings.created.htmlencode():null,$('<a target="_blank" href="http://diskusagereport.sourceforge.net/">Disk Usage Reports</a>'),$('<span id="ChangeLanguage"></span>').text(this.getLanguageName(this.language))))}if(!part||part=='language'){$('#LanguageDialog').dialog('option','title',this.translate('languagedialog_title'))}this.resizeWindow()},getSupportedLanguages:function(sorted,includeHidden){var self=this,list=$.getArrayKeys(this._languages);if(!includeHidden){for(var i=list.length-1;i>=0;i--){if(this._languages[list[i]].hidden)list.splice(i,1)}}if(sorted){list.sort(function(a,b){var aname=self.getLanguageName(a),bname=self.getLanguageName(b);if(aname==null&&bname==null)return 0;else if(aname==null)return 1;else if(bname==null)return-1;else if(aname.toLowerCase()>bname.toLowerCase())return 1;else if(aname.toLowerCase()<bname.toLowerCase())return-1;else return 0})}return list},getLanguageName:function(lang){return this.isLanguageLoaded(lang)?this._languages[lang].language_name:this._languages[lang]},parseAcceptLanguage:function(rules){rules=rules.toLowerCase().replace(/\s/g,'').split(',');for(var i=rules.length-1;i>=0;i--){var split=rules[i].match(/^(([a-z]{1,8})(-([a-z]{1,8}))?)(;q=((1(\.[0]{1,3})?)|(0(\.[0-9]{1,3})?)))?$/i);if(split){rules[i]={order:i,full:split[1],primary:split[2],secondary:split[4]?split[4]:null,quality:isNaN(split[6])?1:parseFloat(split[6])}}else{rules.splice(i,1)}}this.sortLanguageRules(rules);return rules},sortLanguageRules:function(rules){rules.sort(function(a,b){var acomp=a.lang?a.lang==a.full?0:1:0;var bcomp=b.lang?b.lang==b.full?0:1:0;if(a.order==b.order&&acomp!=bcomp){return acomp-bcomp}else if(a.quality==0||b.quality==0||a.quality==b.quality){return a.order-b.order}else{return b.quality-a.quality}})},parseLanguageTag:function(lang){var match=lang.replace(/\s/g,'').match(/^(([a-z]{1,8})(-([a-z]{1,8}))?)$/i);if(match)return{full:match[1],primary:match[2],secondary:match[4]?match[4]:null};else return false},determineRuleForLanguage:function(rules,lang){var langMatch=this.parseLanguageTag(lang),ret=false;if(langMatch!==false){for(var i=0;i<rules.length;i++){if(rules[i].full==langMatch.full){return rules[i]}else if(rules[i].primary==langMatch.primary){if(ret===false){ret=rules[i]}else if(ret.secondary!=null&&rules[i].secondary==null){ret=rules[i]}}}}return ret},matchSupportedLanguagesToRules:function(rules){var supported=this.getSupportedLanguages(null,true);if($.isString(rules))rules=this.parseAcceptLanguage(rules);for(var i=supported.length-1;i>=0;i--){var matchedRule=this.determineRuleForLanguage(rules,supported[i]);if(matchedRule===false||matchedRule.quality==0){supported.splice(i,1)}else{supported[i]=$.extend({lang:supported[i]},matchedRule)}}this.sortLanguageRules(supported);return supported},getTranslation:function(lang,key){if(!this.isLanguageLoaded(lang)||!this._languages[lang][key])return null;return this._languages[lang][key]},hasTranslation:function(lang,key){return this.getTranslation(lang,key)!=null}})})(jQuery);